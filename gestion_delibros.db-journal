import sqlite3

# Conexi√≥n a la base de datos
conexion = sqlite3.connect("libros.db")
cursor = conexion.cursor()

def agregar_libro():
    titulo = input("T√≠tulo del libro: ")
    autor = input("Autor: ")
    anio = int(input("A√±o de publicaci√≥n: "))
    genero = input("G√©nero: ")
    cursor.execute("INSERT INTO libros (titulo, autor, anio_publicacion, genero) VALUES (?, ?, ?, ?)",
                   (titulo, autor, anio, genero))
    conexion.commit()
    print("üìö Libro agregado exitosamente.")

def modificar_libro():
    id_libro = input("ID del libro a modificar: ")
    nuevo_titulo = input("Nuevo t√≠tulo: ")
    nuevo_autor = input("Nuevo autor: ")
    nuevo_anio = int(input("Nuevo a√±o de publicaci√≥n: "))
    nuevo_genero = input("Nuevo g√©nero: ")
    cursor.execute("""
        UPDATE libros 
        SET titulo = ?, autor = ?, anio_publicacion = ?, genero = ?
        WHERE id = ?
    """, (nuevo_titulo, nuevo_autor, nuevo_anio, nuevo_genero, id_libro))
    conexion.commit()
    print("‚úèÔ∏è Libro modificado correctamente.")

def mostrar_libros():
    cursor.execute("SELECT * FROM libros")
    libros = cursor.fetchall()
    for libro in libros:
        print(libro)

def eliminar_libro():
    id_libro = input("ID del libro a eliminar: ")
    cursor.execute("DELETE FROM libros WHERE id = ?", (id_libro,))
    conexion.commit()
    print("üóëÔ∏è Libro eliminado correctamente.")

def buscar_libro():
    titulo = input("Buscar libro por t√≠tulo (usa parte del t√≠tulo si quieres): ")
    cursor.execute("SELECT * FROM libros WHERE titulo LIKE ?", ('%' + titulo + '%',))
    resultados = cursor.fetchall()
    if resultados:
        for libro in resultados:
            print(libro)
    else:
        print("No se encontraron libros con ese t√≠tulo.")

def menu():
    while True:
        print("""
===== Men√∫ de Gesti√≥n de Libros =====
1. Agregar libro
2. Modificar libro
3. Mostrar todos los libros
4. Eliminar libro
5. Buscar libro por t√≠tulo
6. Salir
""")
        opcion = input("Selecciona una opci√≥n: ")
        match opcion:
            case "1":
                agregar_libro()
            case "2":
                modificar_libro()
            case "3":
                mostrar_libros()
            case "4":
                eliminar_libro()
            case "5":
                buscar_libro()
            case "6":
                print("¬°Hasta luego!")
                break
            case _:
                print("‚ùå Opci√≥n no v√°lida. Intenta de nuevo.")

menu()
conexion.close()
